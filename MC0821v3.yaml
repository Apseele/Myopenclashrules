port: 3333

proxies:

# 机场配置模块
provider_config: &provider_config {"type": "http","interval": 86400,"user-agent": "clash","health-check": {"enable": true,"url": "http://www.apple.com/library/test/success.html","interval": 300}}

proxy-providers:
  # 第一个机场
  AP1:
    url: https://meisai2.xn--chqu2nzsxv3y.com/ssone/dba4fa150f91e61d7a4bf71ab5a99e65  #修改你的机场1订阅地址
    <<: *provider_config
    override:
      additional-prefix: "[AP1]"
  # 第二个机场
  #AP2:
    #url: https://XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX #修改你的机场2订阅地址
    #<<: *provider_config
    #override:
      #additional-prefix: "[AP2]"
  # 第三个机场
  #AP3:
    #url: https://XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX #修改你的机场3订阅地址
    #<<: *provider_config
    #override:
     # additional-prefix: "[AP3]"


# 分组配置模块
standard_proxies: &standard_proxies {"type": "select", "proxies": ["🇺🇸 美国节点", "🇭🇰 香港节点", "🇯🇵 日本节点", "🇹🇼 台湾节点", "🇸🇬 新加坡节点", "🇬🇧 英国节点", "🌍 其他节点", "DIRECT","REJECT"], "include-all": true}

# 节点配置模块
filter_proxies: &filter_proxies {"type": "url-test", "url": "http://www.apple.com/library/test/success.html", "interval": 300, "tolerance": 150, "include-all": true}


#域名组
proxy-groups:
#漏网之鱼/代理
  - {name: 🏁Final,<<: *standard_proxies}
#节点切换
  - {name: 🧱Proxy,<<: *standard_proxies}
  - {name: 🚫banProgram, <<: *standard_proxies, proxies: ["REJECT", "DIRECT"]}
  - {name: 🇨🇳China,<<: *standard_proxies, proxies: ["DIRECT"]}
  - {name: 🔞Porn,<<: *standard_proxies}
      
#网页app分流组
  - {name: 💬Telegram,<<: *standard_proxies}
  - {name: 📱X,<<: *standard_proxies}
  - {name: 📱Instagram,<<: *standard_proxies}
  - {name: 💬Facebook,<<: *standard_proxies}
  - {name: 🎵Spotify,<<: *standard_proxies}
  - {name: 💻Speedtest,<<: *standard_proxies}
  - {name: 💻GitHub,<<: *standard_proxies}
  - {name: 📺YouTube,<<: *standard_proxies}
  - {name: 💬📌Bahamut,<<: *standard_proxies, proxies: ["🇹🇼 台湾节点"]}

#服务分流组
  - {name: 🍎Apple,<<: *standard_proxies}
  - {name: 🅶Google,<<: *standard_proxies}
  - {name: Ⓜ️Microsoft,<<: *standard_proxies}
  - {name: 🤖AI,<<: *standard_proxies}

#游戏类分流  
  - {name: 💻🎮Games,<<: *standard_proxies}
  - {name: 🎮🕹️PlayStation,<<: *standard_proxies}
  - {name: 🎮🕹️Xbox,<<: *standard_proxies}
  - {name: 🎮🕹️Nintendo,<<: *standard_proxies}

#节点组    
  # 地区节点代理组
  - name: 🇺🇸 美国节点
    <<: *filter_proxies
    filter: '^(?=.*((?i)🇺🇸|美国|波特兰|达拉斯|俄勒冈|凤凰城|费利蒙|硅谷|拉斯维加斯|洛杉矶|圣何塞|圣克拉拉|西雅图|芝加哥|(\b(US|United States)\b))).*$'

  - name: 🇭🇰 香港节点
    <<: *filter_proxies
    filter: '^(?=.*((?i)🇭🇰|香港|(\b(HK|Hong)\b))).*$'

  - name: 🇯🇵 日本节点
    <<: *filter_proxies
    filter: '^(?=.*((?i)🇯🇵|日本|川日|东京|大阪|泉日|埼玉|(\b(JP|Japan)\b))).*$'

  - name: 🇹🇼 台湾节点
    <<: *filter_proxies
    filter: '^(?=.*((?i)🇹🇼|TW|台湾)).*$'

  - name: 🇸🇬 新加坡节点
    <<: *filter_proxies
    filter: '^(?=.*((?i)🇸🇬|新加坡|狮|(\b(SG|Singapore)\b))).*$'
      
  - name: 🇬🇧 英国节点
    <<: *filter_proxies
    filter: '^(?=.*((?i)🇬🇧|英国|伦敦|(\b(UK|United Kingdom)\b))).*$'

  - name: 🌍 其他节点
    <<: *filter_proxies
    filter: '^(?!.*(🇺🇸|美国|波特兰|达拉斯|俄勒冈|凤凰城|费利蒙|硅谷|拉斯维加斯|洛杉矶|圣何塞|圣克拉拉|西雅图|芝加哥|US|United States|🇭🇰|香港|HK|Hong|🇯🇵|日本|川日|东京|大阪|泉日|埼玉|JP|Japan|🇹🇼|台湾|TW|🇸🇬|新加坡|狮|SG|Singapore|🇬🇧|英国|伦敦|UK|United Kingdom)).*$'


#ruleset配置模块
# 规则类型相关
rule-anchor:
ip: &ip {type: http, interval: 86400, behavior: ipcidr, format: mrs}
ip_list: &iplist {type: http, interval: 86400, behavior: ipcidr, format: text}
domain: &domain {type: http, interval: 86400, behavior: domain, format: mrs}
class: &class {type: http, interval: 86400, behavior: classical, format: text}
rule-providers:
  #domain
  #直连
  direct_list: {<<: *class,url: "https://raw.githubusercontent.com/Apseele/Myopenclashrules/refs/heads/main/Direct_list/Direct_domain.list"}
  bilibili: {<<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/bilibili.mrs"}
  cn: {<<: *domain,url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.mrs"}

  #代理
  proxy: {<<: *domain, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo-lite/geosite/proxy.mrs'}
  gfw: {<<: *domain, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/gfw.mrs'}
  speedtest: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/ookla-speedtest.mrs"}
  geolocation-!cn: {<<: *domain, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/geolocation-!cn.mrs'}
  proxy_domain_list: {<<: *class, url: 'https://raw.githubusercontent.com/Apseele/Myopenclashrules/refs/heads/main/Proxy_list/Proxy_domain.list'}
  telegram: {<<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/telegram.mrs"}
  whatsapp: {<<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/whatsapp.mrs"}
  facebook: {<<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/facebook.mrs"}
  twitter: {<<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/x.mrs"}
  reddit: {<<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/reddit.mrs"}
  Instagram: {<<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/instagram.mrs"}
  github: {<<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/github.mrs"}
  bahamut: {<<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/bahamut.mrs"}
  spotify: {<<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/spotify.mrs"}
  youtube: {<<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/youtube.mrs"}

  #广告
  banProgramAD_domain_list: {<<: *class, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanProgramAD.list"}
  
  #AI分流
  AI_domain_list: {<<: *class, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/AI.list"}
  Gemini_domain_list: {<<: *class, url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Loon/Gemini/Gemini.list"}

  #服务分流
  google: {<<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/google.mrs"}
  microsoft: {<<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/microsoft.mrs"}
  microsoft@cn: {<<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/microsoft@cn.mrs"}
  apple: {<<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/apple.mrs"}
  #游戏分流
  epic: {<<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/epicgames.mrs"}
  ea: {<<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/ea.mrs"}
  blizzard: {<<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/blizzard.mrs"}
  ubi: {<<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/ubisoft.mrs"}
  
  #ip

  bilibili_ip: {<<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo-lite/geoip/bilibili.mrs"}
  cn_ip: {<<: *ip, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cn.mrs'}
  private_ip: {<<: *ip, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo-lite/geoip/private.mrs'}
  apple_ip: {<<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo-lite/geoip/apple.mrs"}
  telegram_ip: {<<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo-lite/geoip/telegram.mrs"}
  twitter_ip: {<<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo-lite/geoip/twitter.mrs"}
  
  #代理
  proxy_ip_list: {<<: *iplist, url: 'https://raw.githubusercontent.com/Apseele/Myopenclashrules/refs/heads/main/Proxy_list/Proxy_IP_CIDR.list'}
  proxy_ip_list: {<<: *iplist, url: 'https://raw.githubusercontent.com/Apseele/Myopenclashrules/refs/heads/main/Proxy_list/Proxy_IP_CIDR.list'}
  direct_ip_list: {<<: *iplist,url: "https://raw.githubusercontent.com/Apseele/Myopenclashrules/refs/heads/main/Direct_list/Direct_IP_CIDR.list"}

rules:
  # ✅/广告/拦截
  - RULE-SET,banProgramAD_domain_list,🚫banProgram
  # ✅ 直连
  - RULE-SET,direct_list,DIRECT
  - RULE-SET,direct_ip_list,DIRECT
  - GEOSITE,category-games@cn,DIRECT
  - RULE-SET,private_ip,DIRECT,no-resolve
  - RULE-SET,bilibili,🇨🇳China
  - RULE-SET,bilibili_ip,🇨🇳China
  # ✅ 国内
  - RULE-SET,cn,🇨🇳China
  - RULE-SET,cn_ip,🇨🇳China,no-resolve
  # ✅ 自定义代理文件
  - RULE-SET,proxy_domain_list,🧱Proxy
  - RULE-SET,proxy_ip_list,🧱Proxy

  # ✅ AI分流
  - RULE-SET,AI_domain_list,🤖AI
  - RULE-SET,Gemini_domain_list,🤖AI
  # ✅ 社交媒体
  - RULE-SET,telegram_ip,💬Telegram,no-resolve
  - RULE-SET,telegram,💬Telegram
  - RULE-SET,twitter_ip,📱X,no-resolve
  - RULE-SET,twitter,📱X
  - RULE-SET,facebook,💬Facebook
  - RULE-SET,reddit,🏁Final
  - RULE-SET,Instagram,📱Instagram
  - RULE-SET,whatsapp,🏁Final
  # ✅ 其他分流
  - RULE-SET,github,💻GitHub
  - RULE-SET,bahamut,💬📌Bahamut
  # ✅ 服务分流
  - RULE-SET,google,🅶Google
  - RULE-SET,google_ip,🅶Google,no-resolve
  - RULE-SET,apple,🍎Apple
  - RULE-SET,apple_ip,🍎Apple,no-resolve
  - RULE-SET,microsoft@cn,DIRECT
  - RULE-SET,microsoft,Ⓜ️Microsoft
  # ✅ 流媒体分流
  - RULE-SET,spotify,🎵Spotify
  - RULE-SET,youtube,📺YouTube
  # ✅ 游戏分流
  - RULE-SET,epic,💻🎮Games
  - RULE-SET,ea,💻🎮Games
  - RULE-SET,blizzard,💻🎮Games
  - RULE-SET,ubi,💻🎮Games
  - GEOSITE,xbox,🎮🕹️Xbox
  - GEOSITE,playstation,🎮🕹️PlayStation
  - GEOSITE,nintendo,🎮🕹️Nintendo
  # 🔞 Porn
  - GEOSITE,category-porn,🔞Porn
  # ✅ 测速/测试
  - RULE-SET,speedtest,💻Speedtest
  # ✅ 总代理类规则
  - RULE-SET,proxy,🧱Proxy
  - RULE-SET,gfw,🧱Proxy
  # ✅ 漏网之鱼
  - MATCH,🏁Final


 

