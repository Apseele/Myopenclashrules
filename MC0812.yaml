port: 3333
# å•ä¸ªèŠ‚ç‚¹
proxies:
# æœºåœºé…ç½®æ¨¡å—
provider_config: &provider_config #é”šç‚¹
  type: http
  interval: 86400
  user-agent: "clash"
  health-check:
    enable: true
    url: http://www.apple.com/library/test/success.html
    interval: 300

proxy-providers:
  # ç¬¬ä¸€ä¸ªæœºåœº
  AP1:
    url: https://meisai2.xn--chqu2nzsxv3y.com/api/v1/client/subscribe?token=dba4fa150f91e61d7a4bf71ab5a99e65  #ä¿®æ”¹ä½ çš„æœºåœº1è®¢é˜…åœ°å€
    <<: *provider_config
    override:
      additional-prefix: "[AP1]"
  # ç¬¬äºŒä¸ªæœºåœº
  #AP2:
    #url: https://XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX #ä¿®æ”¹ä½ çš„æœºåœº2è®¢é˜…åœ°å€
    #<<: *provider_config
    #override:
      #additional-prefix: "[AP2]"
  # ç¬¬ä¸‰ä¸ªæœºåœº
  #AP3:
    #url: https://XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX #ä¿®æ”¹ä½ çš„æœºåœº3è®¢é˜…åœ°å€
    #<<: *provider_config
    #override:
     # additional-prefix: "[AP3]"



##é”šç‚¹start     
# è§„åˆ™ç±»å‹ç›¸å…³
ip: &ip {type: http, interval: 86400, behavior: ipcidr, format: mrs}
ip_list: &iplist {type: http, interval: 86400, behavior: ipcidr, format: text}
domain: &domain {type: http, interval: 86400, behavior: domain, format: mrs}
class: &class {type: http, interval: 86400, behavior: classical, format: text}

# èŠ‚ç‚¹ç­›é€‰ç›¸å…³
HK: &HK '^(?=.*((?i)ğŸ‡­ğŸ‡°|é¦™æ¸¯|(\b(HK|Hong)\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)\b))).*$'
TW: &TW '^(?=.*((?i)ğŸ‡¨ğŸ‡³|å°æ¹¾|(\b(TW|Tai|Taiwan)\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)\b))).*$'
JP: &JP '^(?=.*((?i)ğŸ‡¯ğŸ‡µ|æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|(\b(JP|Japan)\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)\b))).*$'
SG: &SG '^(?=.*((?i)ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|ç‹®|(\b(SG|Singapore)\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)\b))).*$'
US: &US '^(?=.*((?i)ğŸ‡ºğŸ‡¸|ç¾å›½|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|(\b(US|United States)\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)\b))).*$'
All: &All '^(?=.*(.))(?!.*((?i)ç¾¤|é‚€è¯·|è¿”åˆ©|å¾ªç¯|å®˜ç½‘|å®¢æœ|ç½‘ç«™|ç½‘å€|è·å–|è®¢é˜…|æµé‡|åˆ°æœŸ|æœºåœº|ä¸‹æ¬¡|ç‰ˆæœ¬|å®˜å€|å¤‡ç”¨|è¿‡æœŸ|å·²ç”¨|è”ç³»|é‚®ç®±|å·¥å•|è´©å–|é€šçŸ¥|å€’å–|é˜²æ­¢|å›½å†…|åœ°å€|é¢‘é“|æ— æ³•|è¯´æ˜|ä½¿ç”¨|æç¤º|ç‰¹åˆ«|è®¿é—®|æ”¯æŒ|æ•™ç¨‹|å…³æ³¨|æ›´æ–°|ä½œè€…|åŠ å…¥|(\b(USE|USED|TOTAL|Traffic|Expire|EMAIL|Panel|Channel|Author)\b|(\d{4}-\d{2}-\d{2}|\d+G)))).*$'

# åˆ†ç»„é…ç½®æ¨¡å—
standard_proxies: &standard_proxies
  type: select
  proxies:
    - Proxy
    - HongKong
    - TaiWan
    - Japan
    - Singapore
    - America
    - DIRECT
  include-all: true

UrlTest: &UrlTest
  type: url-test
  interval: 300                                           # å¥åº·æ£€æŸ¥é—´éš”
  tolerance: 600                                          # å»¶è¿Ÿå®¹å¿åº¦ï¼Œå•ä½ms
  lazy: true                                              # æœªé€‰ä¸­å½“å‰ç»„æ—¶ä¸è¿›è¡Œæµ‹è¯•
  url: 'http://www.gstatic.com/generate_204'
  disable-udp: false
  timeout: 2000                                           # å¥åº·æ£€æŸ¥è¶…æ—¶ï¼Œå•ä½ms
  max-failed-times: 3                                     # å¤±è´¥æ¬¡æ•°ï¼Œè¶…è¿‡åˆ™æ‰§è¡Œä¸€æ¬¡å¼ºåˆ¶å¥åº·æ£€æŸ¥
  hidden: true                                            # éšè—æ˜¾ç¤º
  include-all-providers: true                             # æ‰€æœ‰èŠ‚ç‚¹

FallBack: &FallBack
  type: fallback
  interval: 300
  lazy: true
  url: 'http://www.gstatic.com/generate_204'
  disable-udp: false
  timeout: 2000
  max-failed-times: 3
  hidden: true
  include-all-providers: true

######### é”šç‚¹ end #########


#åŸŸåç»„
proxy-groups:
#æ¼ç½‘ä¹‹é±¼/ä»£ç†
  - {name: Proxy, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Rocket.png,<<: *standard_proxies, proxies: [HongKong,TaiWan,Japan,Singapore,America,DIRECT]}
  - {name: Final, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Final.png,<<: *standard_proxies, proxies: [Proxy,DIRECT]}

#ç»¼åˆåˆ†æµ
  - {name: Block, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/AdBlack.png,<<: *standard_proxies, proxies: [REJECT, DIRECT]}
  - {name: banProgram, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/AdBlack.png, <<: *standard_proxies, proxies: [REJECT, DIRECT]}
  - {name: ğŸ—½ å›½å¤–, <<: *standard_proxies}
  - {name: ğŸ¯ å›½å†…,<<: *standard_proxies, proxies: [Final, DIRECT]}
  - {name: ğŸ” Porn,<<: *standard_proxies}
      

  
#ç½‘é¡µappåˆ†æµç»„
  - {name: Telegram, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Telegram_X.png,<<: *standard_proxies}
  - {name: X, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/X.png,<<: *standard_proxies}
  - {name: Instagram, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Instagram.png,<<: *standard_proxies}
  - {name: Facebook, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Facebook.png,<<: *standard_proxies}
  - {name: Spotify, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Spotify.png,<<: *standard_proxies}
  - {name: Speedtest, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Speedtest.png,<<: *standard_proxies}
  - {name: GitHub, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/GitHub.png,<<: *standard_proxies}
  - {name: YouTube, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/YouTube.png,<<: *standard_proxies}
  - {name: Bahamut, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Bahamut.png,<<: *standard_proxies, proxies: [HongKong, TaiWan]}

#æœåŠ¡åˆ†æµç»„
  - {name: Apple, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Apple_1.png,<<: *standard_proxies}
  - {name: Google, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Google_Search.png,<<: *standard_proxies}
  - {name: Microsoft, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Windows_11.png,<<: *standard_proxies}
  - {name: ğŸ¤– AI, <<: *standard_proxies}

#æ¸¸æˆç±»åˆ†æµ  
  - {name: Steam, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Steam.png,<<: *standard_proxies}
  - {name: Games, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Game.png,<<: *standard_proxies}
  - {name: PlayStation, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/PlayStation.png,<<: *standard_proxies}
  - {name: Xbox, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Xbox.png,<<: *standard_proxies}
  - {name: Nintendo,icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Nintendo.png,<<: *standard_proxies}

#èŠ‚ç‚¹ç»„    
  # åœ°åŒºèŠ‚ç‚¹ä»£ç†ç»„
  - {name: HongKong, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Hong_Kong.png, type: select, proxies: [HK-Auto, HK-FallBack], include-all-providers: true, filter: *HK}
  - {name: TaiWan, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/China.png, type: select, proxies: [TW-Auto, TW-FallBack], include-all-providers: true, filter: *TW}
  - {name: Japan, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Japan.png, type: select, proxies: [JP-Auto, JP-FallBack], include-all-providers: true, filter: *JP}
  - {name: Singapore, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Singapore.png, type: select, proxies: [SG-Auto, SG-FallBack], include-all-providers: true, filter: *SG}
  - {name: America, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/United_States.png, type: select, proxies: [US-Auto, US-FallBack], include-all-providers: true, filter: *US}
  #å…¨éƒ¨èŠ‚ç‚¹

# å»¶æ—¶ä¼˜é€‰ä»£ç†ç»„
  - {name: HK-Auto, <<: *UrlTest, filter: *HK, exclude-filter: '(å…è´¹|ä¸‹è½½|ç›´è¿)'}
  - {name: TW-Auto, <<: *UrlTest, filter: *TW, exclude-filter: '(å…è´¹|ä¸‹è½½|ç›´è¿)'}
  - {name: JP-Auto, <<: *UrlTest, filter: *JP, exclude-filter: '(å…è´¹|ä¸‹è½½|ç›´è¿)'}
  - {name: SG-Auto, <<: *UrlTest, filter: *SG, exclude-filter: '(å…è´¹|ä¸‹è½½|ç›´è¿)'}
  - {name: US-Auto, <<: *UrlTest, filter: *US, exclude-filter: '(å…è´¹|ä¸‹è½½|ç›´è¿)'}

# æ•…éšœè½¬ç§»ä»£ç†ç»„
  - {name: HK-FallBack, <<: *FallBack, filter: *HK, exclude-filter: '(å…è´¹|ä¸‹è½½|ç›´è¿)'}
  - {name: TW-FallBack, <<: *FallBack, filter: *TW, exclude-filter: '(å…è´¹|ä¸‹è½½|ç›´è¿)'}
  - {name: JP-FallBack, <<: *FallBack, filter: *JP, exclude-filter: '(å…è´¹|ä¸‹è½½|ç›´è¿)'}
  - {name: SG-FallBack, <<: *FallBack, filter: *SG, exclude-filter: '(å…è´¹|ä¸‹è½½|ç›´è¿)'}
  - {name: US-FallBack, <<: *FallBack, filter: *US, exclude-filter: '(å…è´¹|ä¸‹è½½|ç›´è¿)'}
  

rule-providers:
  #å›½å†…/ç›´è¿
  cn_domain: {<<: *domain, path: ./ruleset/cn_domain.mrs, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.mrs"}
  direct_class: {<<: *class, path: ./ruleset/direct_class.list, url: "https://raw.githubusercontent.com/Apseele/Myopenclashrules/refs/heads/main/direct.list"}
  # /å¹¿å‘Š/è‡ªå®šä¹‰
  anti-ad_domain: {<<: *domain, path: ./ruleset/anti-ad_domain.mrs, url: "https://raw.githubusercontent.com/privacy-protection-tools/anti-ad.github.io/master/docs/mihomo.mrs"}
  ad_ip: { <<: *iplist, path: ./ruleset/AD_ip.list, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/ad.list"}
  banProgramAD_domain: {<<: *class, path: ./ruleset/banProgramAD_domain.list, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanProgramAD.list"}
  speedtest_domain: { <<: *domain, path: ./ruleset/speedtest_domain.mrs, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/ookla-speedtest.mrs"}
  etralist_class: {<<: *class, path: ./ruleset/etralist_class.list, url: "https://raw.githubusercontent.com/Apseele/Myopenclashrules/refs/heads/main/etra.list"}
  
  #AIåˆ†æµ
  AI_class: {<<: *class, path: ./ruleset/AI_class.list, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/AI.list"}
  Gemini_class: {<<: *class, path: ./ruleset/Gemini_class.list, url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Loon/Gemini/Gemini.list"}

  #ç¤¾äº¤åª’ä½“
  telegram_domain: {<<: *domain, path: ./ruleset/telegram_domain.mrs, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/telegram.mrs"}
  whatsapp_domain: {<<: *domain, path: ./ruleset/whatsapp_domain.mrs, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/whatsapp.mrs"}
  facebook_domain: {<<: *domain, path: ./ruleset/facebook_domain.mrs, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/facebook.mrs"}
  twitter_domain: {<<: *domain, path: ./ruleset/twitter_domain.mrs, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/x.mrs"}
  reddit_domain: {<<: *domain, path: ./ruleset/reddit_domain.mrs, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/reddit.mrs"}
  Instagram_class: {<<: *class, path: ./ruleset/Instagram_class.list, url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Instagram/Instagram.list"}

  #å…¶ä»–
  github_domain: {<<: *domain, path: ./ruleset/github_domain.mrs, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/github.mrs"}
  bahamut_domain: {<<: *domain, path: ./ruleset/bahamut_domain.mrs, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/bahamut.mrs"}
  
  #æœåŠ¡åˆ†æµ
  google_domain: {<<: *domain, path: ./ruleset/google_domain.mrs, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/google.mrs"}
  microsoft_domain: {<<: *domain, path: ./ruleset/microsoft_domain.mrs, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/microsoft.mrs"}

  #æµåª’ä½“åˆ†æµ
  spotify_domain: {<<: *domain, path: ./ruleset/spotify_domain.mrs, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/spotify.mrs"}
  youtube_domain: {<<: *domain, path: ./ruleset/youtube_domain.mrs, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/youtube.mrs"}
  bilibili_domain: {<<: *domain, path: ./ruleset/bilibili_domain.mrs, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/bilibili.mrs"}
  bilibili_ip: {<<: *ip, path: ./ruleset/bilibili_ip.mrs, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo-lite/geoip/bilibili.mrs"}

  #æ¸¸æˆåˆ†æµ
  Steam_class: {<<: *class, path: ./ruleset/Steam_class.list, url: "https://raw.githubusercontent.com/Apseele/Myopenclashrules/refs/heads/main/Steamproxy.list"}
  epic_domain: {<<: *domain, path: ./ruleset/epic_domain.mrs, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/epicgames.mrs"}
  ea_domain: {<<: *domain, path: ./ruleset/ea_domain.mrs, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/ea.mrs"}
  blizzard_domain: {<<: *domain, path: ./ruleset/blizzard_domain.mrs, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/blizzard.mrs"}
  ubi_domain: {<<: *domain, path: ./ruleset/ubi_domain.mrs, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/ubisoft.mrs"}
 
  #å›½å¤–
  gfw_domain: {<<: *domain, path: ./ruleset/gfw_domain.mrs, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/gfw.mrs"}
  global_domain: {<<: *class, path: ./ruleset/global_domain.list, url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Global/Global.list"}
  proxy_domain: {<<: *domain, path: ./ruleset/proxy_domain.mrs, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo-lite/geosite/proxy.mrs"}



rules:
  # âœ… ç›´è¿é«˜ä¼˜å…ˆ
  - RULE-SET,direct_class,DIRECT
  - GEOSITE,category-games@cn,DIRECT
  # âœ… è‡ªå®šä¹‰ä»£ç†æ–‡ä»¶
  - RULE-SET,etralist_class,Proxy
  # âœ… ç§æœ‰ç½‘ç»œ/å›½å†…/å¹¿å‘Š/æ‹¦æˆª
  - GEOSITE,private,DIRECT
  - GEOIP,private,DIRECT,no-resolve
  - RULE-SET,anti-ad_domain,Block
  - RULE-SET,ad_ip,Block
  - RULE-SET,banProgramAD_domain,Block
  # âœ… AIåˆ†æµ
  - RULE-SET,AI_class,ğŸ¤– AI
  - RULE-SET,Gemini_class,ğŸ¤– AI
  # âœ… ç¤¾äº¤åª’ä½“
  - GEOIP,telegram,Telegram
  - RULE-SET,telegram_domain,Telegram
  - RULE-SET,twitter_domain,X
  - RULE-SET,facebook_domain,Facebook
  - RULE-SET,reddit_domain,Final
  - RULE-SET,Instagram_class,Instagram
  - RULE-SET,whatsapp_domain,Final
  # âœ… å…¶ä»–åˆ†æµ
  - RULE-SET,github_domain,GitHub
  - RULE-SET,bahamut_domain,Bahamut
  # âœ… æœåŠ¡åˆ†æµ
  - RULE-SET,google_domain,Google
  - GEOIP,google,Google
  - GEOSITE,apple,Apple
  - RULE-SET,microsoft_domain,Microsoft
  # âœ… æµåª’ä½“åˆ†æµ
  - RULE-SET,spotify_domain,Spotify
  - RULE-SET,youtube_domain,YouTube
  - RULE-SET,bilibili_domain,DIRECT
  - RULE-SET,bilibili_ip,DIRECT
  # âœ… æ¸¸æˆåˆ†æµ
  - RULE-SET,Steam_class,Steam
  - RULE-SET,epic_domain,Games
  - RULE-SET,ea_domain,Games
  - RULE-SET,blizzard_domain,Games
  - RULE-SET,ubi_domain,Games
  - GEOSITE,xbox,Xbox
  - GEOSITE,playstation,PlayStation
  - GEOSITE,nintendo,Nintendo

  # ğŸ” Porn
  - GEOSITE,category-porn,ğŸ” Porn

  # âœ… æµ‹é€Ÿ/æµ‹è¯•
  - RULE-SET,speedtest_domain,Speedtest

  # âœ… å›½å†…
  - RULE-SET,cn_domain,ğŸ¯ å›½å†… 
  - GEOIP,CN,ğŸ¯ å›½å†…
  - GEOSITE,CN,ğŸ¯ å›½å†…

  # âœ… ä»£ç†ç±»è§„åˆ™
  - RULE-SET,gfw_domain,ğŸ—½ å›½å¤–
  - RULE-SET,proxy_domain,ğŸ—½ å›½å¤–
  - RULE-SET,global_domain,ğŸ—½ å›½å¤–

  # âœ… æ¼ç½‘ä¹‹é±¼
  - MATCH,Final
